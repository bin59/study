<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- 
        ajax
            Asynchronous Javascript And XML（异步JavaScript和XML）
            不是新的编程语言，而是一种使用现有标准的新方法。

            是一种用于创建快速动态网页的技术，通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。

            AJAX是基于现有的Internet标准，并且联合使用它们：
                XMLHttpRequest 对象 (异步的与服务器交换数据)
                JavaScript/DOM (信息显示/交互)
                CSS (给数据定义样式)
                XML (作为转换数据的格式)
            AJAX应用程序与浏览器和平台无关的！

        ajax的作用
            是一种在不重新加载整个页面的情况下，可以与服务器交换数据并更新部分网页内容。
     -->
    <script>
      //  创建ajax

      // 1、新建XMLHttpRequest对象
      let xhr = new XMLHttpRequest()

      //  2、open(method,url,async)
      /*
        设置请求方式、请求地址以及是否异步处理请求
            method：请求的类型；GET 或 POST
            url：文件在服务器上的位置
            async：true（异步）或 false（同步）
        */
      xhr.open('GET', 'http://studentback.dfbuff.xyz/getImgs?imgs_id=1')

      // 3、send(string)
      /*
        将请求发送到服务器。
            string：仅用于 POST 请求
        */
      xhr.send()
      // 4、监听XMLHttpRequest对象状态
      xhr.addEventListener('readystatechange', () => {
        /*
                xhr.readyState
                0    未初始化  未调用open()
                1    启动     已 调用open(),但是未发送请求send()
                2    发送     发送请求send()，但是未收到服务器响应
                3    接受   接收部分响应数据
                4    完成   已接收全部响应数据
            */
        console.log(xhr.readyState) //2  3  4
        if (xhr.readyState == 4) {
          console.log('已经接收全部响应数据')
          // xhr.status  状态码
          // 后台返回的状态码等于200，请求成功
          console.log(xhr.status) //200
          if (xhr.status == 200) {
            console.log(JSON.parse(xhr.responseText))
          }
        }
      })
      console.log('我是同步任务')
    </script>
  </body>
</html>
